@if (toastMessage) {
  <div class="toast-notification" [ngClass]="'toast-' + toastType">
    {{ toastMessage }}
    <button (click)="hideToast()" class="toast-close-btn">&times;</button>
  </div>
}
<div class="register-overlay">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-container">
    <div class="register-header">
      <div class="register-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
      </div>
      <h2 class="register-title">Crear Cuenta</h2>
      <p class="register-subtitle">Únete a INSPECTIA y revoluciona tu control de calidad</p>
    </div>

    <div class="register-form">
      <div class="form-group">
        <label class="form-label">Nombre</label>
        <input
          type="text"
          formControlName="name"
          class="form-input"
          placeholder="Tu nombre o el de tu compañia"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label">Email Corporativo</label>
        <input
          type="email"
          formControlName="email"
          class="form-input"
          placeholder="tu@empresa.com"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label">Contraseña</label>
        <div class="password-input">
          <input
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            class="form-input"
            placeholder="Mínimo 8 caracteres"
            required
          />
          <button
            type="button"
            (click)="togglePassword()"
            class="password-toggle"
          >
            @if (!showPassword) {
              <svg  xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            }
            @if (showPassword) {
              <svg  xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/>
                <path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/>
                <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/>
                <line x1="2" x2="22" y1="2" y2="22"/>
              </svg>
            }
          </button>
        </div>
        <div class="password-requirements">
          @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
            <p class="requirement-text error-text">La contraseña debe contener al menos 8 caracteres</p>
          } @else {
            <p class="requirement-text">La contraseña debe contener al menos 8 caracteres</p>
          }
        </div>
      </div>

      <div class="form-options">
        <label class="checkbox-label">
          <input type="checkbox" formControlName="terms" class="checkbox">
          <span class="checkbox-text">
            Acepto los 
            <a href="#" class="terms-link">Términos y Condiciones</a> 
            y la 
            <a href="#" class="terms-link">Política de Privacidad</a>
          </span>
        </label>
      </div>

      <button
        type="submit"
        [disabled]="registerForm.invalid || isLoading"
        class="register-submit-btn" [class.loading]="isLoading"
      >
        @if (isLoading) {
        <div class="loading-content">
          <div class="spinner"></div>
          <span>Creando cuenta...</span>
        </div>
        }
        @if (!isLoading) {
        <span>Crear Cuenta</span>
        }
      </button>
    </div>

    <div class="register-footer">
      <p class="login-text">
        ¿Ya tienes cuenta? 
        <a (click)="onSwitchToLogin()" class="login-link">Inicia sesión aquí</a>
      </p>
    </div>

    <button (click)="closeRegister()" class="close-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 6 6 18"/>
        <path d="m6 6 12 12"/>
      </svg>
    </button>
